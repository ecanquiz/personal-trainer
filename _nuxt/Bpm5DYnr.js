import{_ as S}from"./DlAUqK2U.js";import{o as a,c as _,a as t,y as T,f as U,z as M,F as $,s as A,A as w,q as b,h as k,k as i,B as q,C as N,D as E,r as H,E as P,l as V,b as f,w as v,d as x,m as z,v as D,i as y,t as g}from"./B_uesXd3.js";import{_ as F}from"./DiTmWIYY.js";import{_ as I}from"./DPGredb3.js";import{u as j,U as C}from"./p0DAgE1i.js";import"./DLT07zy2.js";const G={},O={class:"bg-gray200 mb-0"},J={class:"py-4"},K={class:"font-bold text-2xl"};function Q(o,d){return a(),_("div",O,[t("div",J,[t("h1",K,[T(o.$slots,"default")])])])}const W=S(G,[["render",Q]]),X={name:"AvatarIcon"},Y={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},Z=t("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"},null,-1),tt=[Z];function et(o,d,c,m,p,u){return a(),_("svg",Y,tt)}const st=S(X,[["render",et]]),ot={class:"mt-6 -mb-1 flex flex-wrap"},nt=["innerHTML"],rt=U({__name:"PaginationB",props:{links:{}},setup(o){const c=q().public.API_BASE_URL;return(m,p)=>{const u=M("RouterLink");return a(),_("div",ot,[(a(!0),_($,null,A(m.links,(n,h)=>(a(),_($,{key:h},[n.url===null?(a(),_("div",{key:0,class:w(["mr-1 mb-1 px-4 py-3 text-sm border rounded text-gray-400",{"ml-auto":n.label==="Next"}]),innerHTML:n.label},null,10,nt)):b("",!0),n.url!==null?(a(),k(u,{key:1,class:w(["mr-1 mb-1 px-4 py-3 text-sm border rounded hover:bg-gray-400 focus:border-indigo-500 focus:text-indigo-500",{"bg-base-100":n.active,"ml-auto":n.label==="Next"}]),to:n.url.replace(i(c),""),innerHTML:n.label},null,8,["class","to","innerHTML"])):b("",!0)],64))),128))])}}}),at=(o,d)=>{const c=N(),m=E();let p;const u=e=>{clearTimeout(p),p=setTimeout(()=>{h({search:e.target.value})},300)},n=e=>{let r="asc";o.sort==e&&(r=o.direction=="asc"?"desc":"asc"),h({direction:r,sort:e})},h=e=>{const r={search:o.search||"",sort:o.sort||"",direction:o.direction||"",...e};c.push({path:d,query:{...m.query,...r}})};return{route:m,router:c,setSearch:u,setSort:n}},ct=()=>{const o=H({rows:[],links:[],search:"",sort:"",direction:""}),{errors:d,getError:c}=j(),{route:m,router:p,setSearch:u,setSort:n}=at(o,"/users"),h=r=>C.getUsers(r).then(s=>{d.value={},o.rows=s.data.rows.data,o.links=s.data.rows.links,o.search=s.data.search,o.sort=s.data.sort,o.direction=s.data.direction}).catch(s=>{console.log(s)}),e=r=>{if(r!==void 0&&confirm(`¿Estás seguro que desea eliminar el registro ${r}?`))return C.deleteUser(r).then(s=>{d.value={},p.push({path:"/users"})}).catch(s=>{console.log(s.response.data),d.value=c(s)})};return P(async(r,s)=>{r.query!==s.query&&await h(new URLSearchParams(r.query).toString())}),V(()=>{h(new URLSearchParams(m.query).toString())}),{errors:d,data:o,router:p,deleteRow:e,setSearch:u,setSort:n}},lt={class:"flex space-x-2"},it=t("span",null,"Crear",-1),dt={class:"overflow-hidden panel mt-6"},_t={class:"mb-6 flex justify-between items-center"},ut={class:"flex items-center"},mt={class:"flex w-full bg-white shadow rounded"},pt={class:"table-data__wrapper"},ht={class:"table-data"},ft={class:""},vt=t("th",{class:""}," Avatar ",-1),xt={class:""},bt={class:""},gt={class:""},yt=t("th",{class:""},"Acción",-1),$t={class:"inline-flex items-center space-x-2"},kt=["src"],wt={class:""},Ct={class:""},St={class:""},Ut={class:""},At={class:"flex items-center space-x-1"},Rt={key:0},Bt=t("td",{class:"",colspan:"4"},"Usuarios no encontrados.",-1),Lt=[Bt],Tt={key:0,class:"text-red-500"},Vt=U({__name:"index",setup(o){const{errors:d,data:c,router:m,deleteRow:p,setSearch:u,setSort:n}=ct();return(h,e)=>{const r=W,s=F,R=st,B=I,L=rt;return a(),_("div",null,[f(r,null,{default:v(()=>[x(" Usuarios ")]),_:1}),t("div",lt,[f(s,{class:"btn btn-primary",to:"/users/create"},{default:v(()=>[it]),_:1})]),t("div",dt,[t("div",_t,[t("div",ut,[t("div",mt,[z(t("input",{class:"",type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>i(c).search=l),onInput:e[1]||(e[1]=(...l)=>i(u)&&i(u)(...l)),placeholder:"Filtrar…"},null,544),[[D,i(c).search]])])])]),t("div",pt,[t("table",ht,[t("thead",null,[t("tr",ft,[vt,t("th",xt,[f(s,{to:"#",onClick:e[2]||(e[2]=y(l=>i(n)("name"),["prevent"]))},{default:v(()=>[x("Nombre")]),_:1})]),t("th",bt,[f(s,{to:"#",onClick:e[3]||(e[3]=y(l=>i(n)("email"),["prevent"]))},{default:v(()=>[x("Correo")]),_:1})]),t("th",gt,[f(s,{to:"#",onClick:e[4]||(e[4]=y(l=>i(n)("role"),["prevent"]))},{default:v(()=>[x("Role")]),_:1})]),yt])]),t("tbody",null,[(a(!0),_($,null,A(i(c).rows,l=>(a(),_("tr",{key:l.id,class:""},[t("td",null,[t("div",$t,[l.avatar?(a(),_("img",{key:0,src:l.avatar,class:"w-10 h-10 rounded-full",alt:""},null,8,kt)):(a(),k(R,{key:1,class:"w-10 h-10 text-gray-400 rounded-full"}))])]),t("td",wt,g(l.name),1),t("td",Ct,g(l.email),1),t("td",St,g(l.role_id),1),t("td",Ut,[t("div",At,[f(s,{class:"btn btn-primary btn-xs mr-1",to:`/users/edit/${l.id}`},{default:v(()=>[x(" Editar ")]),_:2},1032,["to"]),f(B,{onClick:e[5]||(e[5]=()=>{}),class:"btn btn-danger btn-xs ml-1"},{default:v(()=>[x(" Eliminar ")]),_:1})])])]))),128)),i(c).rows.length===0?(a(),_("tr",Rt,Lt)):b("",!0)])])]),Object.keys(i(d)).length>0?(a(),_("span",Tt,g(i(d)),1)):b("",!0),i(c).links?(a(),k(L,{key:1,links:i(c).links},null,8,["links"])):b("",!0)])])}}});export{Vt as default};
